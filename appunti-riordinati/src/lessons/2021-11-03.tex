%
% Lezione del 3 Novembre 2021
%

\section{Esercizi}

\subsection{Basi Hilbertiane e proiezioni}

\textbf{Esercizio.}
Sia $H = L^2(-1, 1)$ e sia $V = \spn\{ 1, x, x^2 \}$. Verificare che $V$ è un sottospazio chiuso e calcolare la proiezione di $\sin x$ su $V$. \\
\textit{Notazione.} Indichiamo con $\norm{\curry}$ la norma $\norm{\curry}_{L^2(-1, 1)}$ e con $\langle \curry, \curry \rangle$ il prodotto scalare su $L^2$.

\textbf{Soluzione.}
Vediamo come risolvere questo esercizio in tre modi diversi.

\begin{enumerate}
% \textbf{Osservazione.}
% Su $L^2(\R)$ e su $L^2(-1, 1)$ esistono di sicuro basi Hilbertiane di cardinalità numerabile in quanto abbiamo già visto che sono spazi separabili.

\item Dato $H$ spazio di Hilbert separabile, e dato un sottospazio $V \subset H$, vediamo come trovare la proiezione di un elemento $x \in H$ su $V$. Procediamo come segue.
\begin{itemize}
	\item Controlliamo che $V$ sia chiuso.

	\item Calcoliamo una base hilbertiana di $V$ che indichiamo con $\{ e_1, \dots, e_n, \dots \}$. 
\end{itemize}
Il tal caso, la proiezione di un elemento $x \in H$  su $V$ è data da
$$
	p_V(x) = \sum_n \langle x, e_n \rangle e_n.
$$

\textbf{Esercizio.} [TO DO: per casa] Ogni sottospazio di dimensione finita  di uno spazio di Hilbert o di $L^p$ è chiuso (e in particolare ha parte interna vuota).

Abbiamo una base di $V$ data da $\{1, x, x^2\}$ (è una base in quanto sono linearmente indipendenti: si può verificare mostrando che $\forall x \in [-1, 1] \; \lambda_1 + \lambda_2 x + \lambda_3 x^2 = 0 \implies \lambda_1 = \lambda_2 = \lambda_3 = 0$ usando la teoria sulle equazioni di II grado oppure si può derivare e man mano ottenere più informazioni su $\lambda_3, \lambda_2, \lambda_1$).

Volendo usare la base scritta sopra per calcolare la proiezione di $\sin x$ su $V$, dovremmo prima applicare Gram-Schmidt alla base $\{1,x,x^2\}$ per determinare una base Hilbertiana:
$$
\begin{aligned}
	e_1 &= \frac{1}{\norm{1}} = \frac{1}{\sqrt{2}} \\
	e_2 &= \frac{x - \langle x, \frac{1}{\sqrt 2} \rangle \cdot 1}{\norm{x - \langle x, \frac{1}{\sqrt 2} \rangle \cdot 1}} \\
	e_3 &= \frac{x^2 - \langle x^2, e_1 \rangle \cdot e_1 - \langle x^2, e_2 \rangle \cdot e_2}{\norm{x^2 - \langle x^2, e_1 \rangle \cdot e_1 - \langle x^2, e_2 \rangle \cdot e_2}} \\
\end{aligned}
$$
e successivamente calcolare $p_V(\sin x)$ con la formula scritta sopra.

\item Alternativamente, possiamo direttamente cercare la proiezione di $\sin x$ su $V$. Determiniamo $a, b, c$ tali che $a + b x + c x^2$ sia $p_V(x) = \sin x$ allora posto $f(x) \coloneqq \sin x - a - b x - c x^2$ abbiamo $f(x) \in V^\perp \iff $ si verificano le seguenti condizioni
$$
\langle f(x), 1 \rangle = 0
\qquad
\langle f(x), x \rangle = 0
\qquad
\langle f(x), x^2 \rangle = 0
$$
Ad esempio da $\langle f(x), 1 \rangle = 0$ otteniamo
$$
0 = \int_{-1}^1 (\sin x - a - b x - c x^2) \cdot 1 \dd x 
= \underbrace{\int_{-1}^1 \sin x \dd x}_{=0} - 2a - b \underbrace{\int_{-1}^1 x \dd x}_{=0} - c \int_{-1}^1 x^2
\implies 0 = -2a - \frac{2}{3}c
$$
ed analogamente si procede con $x$ e $x^2$... [TODO: Da finire]

\item Un altro modo è considerare la funzione $g(a, b, c) \coloneqq \norm{\sin x - a - bx - cx^2}_{L^2(-1, 1)}$ che è continua, coerciva, etc. e imponendo $\nabla_{a,b,c,} g = 0$ si minimizza e si ottengono $\bar a, \bar b, \bar c$ che verificano $p_V(\sin x)$.

\end{enumerate}

% \textbf{Osservazione.}
% Su $L^2(\R)$ e su $L^2(-1, 1)$ esistono di sicuro basi Hilbertiane di cardinalità numerabile in quanto abbiamo già visto che sono spazi separabili.

% Dato $H$ spazio di Hilbert separabile, e dato un sottospazio $V \subset H$, vediamo come trovare la proiezione di un elemento $x \in H$ su $V$.

% Procediamo come segue.
% \begin{itemize}
% 	\item Controlliamo che $V$ sia chiuso.

% 	\item Calcoliamo una ``base hilbertiana di $V$'' che indichiamo con $\{ e_1, \dots, e_n, \dots \}$. 
% \end{itemize}
% Il tal caso, la proiezione di un elemento $x \in H$  su $V$ è data da
% $$
% 	p_V(x) = \sum_n \langle x, e_n \rangle e_n.
% $$

% \textbf{Esercizio.} [TO DO: per casa] Ogni sottospazio di dimensione finita  di uno spazio di Hilbert o di $L^p$ è chiuso (e in particolare ha parte interna vuota).

% \textbf{Soluzione.}
% Indichiamo con $\norm{\curry}$ la norma $\norm{\curry}_{L^2(-1, 1)}$ e con $\langle \curry, \curry \rangle$ il prodotto scalare su $L^2$.

% Abbiamo una base di $V$ data da $\{1, x, x^2\}$ in quanto sono linearmente indipendenti (si può verficare mostrando che $\forall x \in [-1, 1] \; \lambda_1 + \lambda_2 x + \lambda_3 x^2 = 0 \implies \lambda_1 = \lambda_2 = \lambda_3 = 0$ usando la teoria sulle equazioni di II grado oppure si può derivare e man mano ottenere più informazioni su $\lambda_3, \lambda_2, \lambda_1$).

% Volendo usare la base scritta sopra per calcolare la proiezione di $\sin x$ su $V$, dovremmo prima applicare Gram-Schmidt.
% $$
% \begin{aligned}
% 	e_1 &= \frac{1}{\norm{1}} = \frac{1}{\sqrt{2}} \\
% 	e_2 &= \frac{x - \langle x, \frac{1}{\sqrt 2} \rangle \cdot 1}{\norm{x - \langle x, \frac{1}{\sqrt 2} \rangle \cdot 1}} \\
% 	e_3 &= \frac{x^2 - \langle x^2, e_1 \rangle \cdot e_1 - \langle x^2, e_2 \rangle \cdot e_2}{\norm{x^2 - \langle x^2, e_1 \rangle \cdot e_1 - \langle x^2, e_2 \rangle \cdot e_2}} \\
% \end{aligned}
% $$

% Alternativamente, possiamo direttamente cercare la proiezione di $\sin x$ su $V$. Determiniamo $a, b, c$ tali che $a + b x + c x^2$ sia $p_V(x) = \sin x$ allora posto $f(x) \coloneqq \sin x - a - b x - c x^2$ abbiamo $f(x) \in V^\perp \iff $ si verificano le seguenti condizioni
% $$
% \langle f(x), 1 \rangle = 0
% \qquad
% \langle f(x), x \rangle = 0
% \qquad
% \langle f(x), x^2 \rangle = 0
% $$
% Ad esempio da $\langle f(x), 1 \rangle = 0$ otteniamo
% $$
% 0 = \int_{-1}^1 (\sin x - a - b x - c x^2) \cdot 1 \dd x 
% = \underbrace{\int_{-1}^1 \sin x \dd x}_{=0} - 2a - b \underbrace{\int_{-1}^1 x \dd x}_{=0} - c \int_{-1}^1 x^2
% \implies 0 = -2a - \frac{2}{3}c
% $$
% ed analogamente si procede con $x$ e $x^2$... [TODO: Magari finire questo esercizio veramente]
%
% Un altro modo è considerare la funzione $g(a, b, c) \coloneqq \norm{\sin x - a - bx - cx^2}_{L^2(-1, 1)}$ che è continua, coerciva, etc. e imponendo $\nabla_{a,b,c,} g = 0$ si minimizza e si ottengono $\bar a, \bar b, \bar c$ che verficano $p_V(\sin x)$.


\textbf{Esercizio.}
Sia $X = \{ u \in L^2(\R) \mid \int_0^2 u \dd x = 0 \}$, dire se è un sottospazio chiuso, calcolare $X^\perp$ per una generica $u \in L^2(\R)$ e determinare le proiezioni $p_X(u)$ e $p_{X^\perp}(u)$.

\textbf{Soluzione.}
La mappa $T$ lineare data da
$$
u \mapsto \int_0^2 u \dd x
$$
è ben definita, lineare e continua, allora $X$ è proprio $T^{-1}(0)$ dunque è un sottospazio chiuso. 

\textbf{Osservazione.} Notiamo che
$$
T(u) 
= \int_\R u(x) \cdot \One_{[0, 2]}(x) \dd x
= \langle u, g \rangle_{L^2(\R)},
\qquad g = \One_{[0, 2]}(x) \in L^2(\R).
$$

% E dunque $X = \{ u \in L^2 \mid \langle u, g \rangle = 0 \}$.

Calcoliamo ora $X^\perp$ e le proiezioni $p_X$, $p_{X^\perp}$. 
Abbiamo che $X = \{ u \in L^2(\R) \mid \langle u, g \rangle = 0 \}$ dove $g = \One_{[0,2]}(x)$, dunque\footnote{Dato $\mc{F} \subset H$ spazio di Hilbert, $(\mc{F}^\perp)^\perp = \ol{\spn{\mc{F}}}$} $X = \spn(g)^\perp \Longrightarrow X^\perp = (\spn(g)^\perp)^\perp =  \ol{\spn(g)} = \spn{g}$.

Notiamo\footnote{Con $g / \norm{g^\perp}_{L^2}$ indichiamo una base normalizzata di $g^\perp$.} che
$$
	L^2(\R) = \spn_\R\left\{\frac{g}{\norm{g}_{L^2}}\right\} \oplus \left\{ \frac{g^\perp}{\norm{g^\perp}_{L^2}} \right\}.
$$
Calcoliamo $p_X(u)$ come segue
%
$$
p_X(u) = u - \left<u, \frac{g}{\norm{g}_{L^2}} \right> \cdot \frac{g}{\norm{g}_{L^2}},
$$
%
dove
$$
\norm{g}_{L^2} = \left( \int_\R \One_{[0, 2]}(x)^2 \dd x \right)^{1/2} = \sqrt 2
$$
e dunque
$$
p_X(u) = u - \left( \int_0^2 u \dd x \right) \cdot \frac{\One_{[0,2]}}{2}
$$

Un controllo veloce per verificare di aver fatto i conti corretti è quello di vedere che $p_X(u) \in X$, dunque di verificare che $\int_0^2 p_X(u) \dd x = 0$.

Per calcolare $p_{X^\perp}(u)$ usiamo la seguente.

\textbf{Osservazione.} Vale $u = p_X(u) + p_{X^\perp}(u)$.

In conclusione,
%
$$
p_{X^\perp}(u) = u - p_X(u) = \left( \int_0^2 u \dd x \right) \cdot \frac{\One_{[0,2]}}{2}.
$$
%


\textbf{Esercizio.} [TO DO: per casa.]
Sia $V = \{ \underline x = (x_n)_{n \in \N} \in \ell^2 \mid x_1 + x_3 + x_5 = 0 \}$. 
Dire se $V$ è chiuso in $\ell^2$ e calcolare $p_V$ e $p_{V^\perp}$.
